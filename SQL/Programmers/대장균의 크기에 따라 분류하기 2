WITH DATA_RANK AS(
    SELECT ID,
        PERCENT_RANK() OVER (ORDER BY SIZE_OF_COLONY DESC) AS PRANK,
        SIZE_OF_COLONY
    FROM ECOLI_DATA
)
SELECT ID, CASE 
       WHEN PRANK <= 0.25 THEN 'CRITICAL'
        WHEN PRANK <= 0.5 THEN 'HIGH'
        WHEN PRANK <= 0.75 THEN 'MEDIUM'
        ELSE 'LOW' END 'COLONY_NAME'
FROM DATA_RANK
ORDER BY ID


# SELECT ID, CASE 
#             WHEN PRANK <= 0.25 THEN 'CRITICAL'
#             WHEN PRANK <= 0.5 THEN 'HIGH'
#             WHEN PRANK <= 0.75 THEN 'MEDIUM'
#         ELSE 'LOW' END AS COLONY_NAME
# FROM (
#     SELECT ID,
#          ROUND(PERCENT_RANK() OVER (ORDER BY SIZE_OF_COLONY DESC),2) AS PRANK,
#         SIZE_OF_COLONY 
#     FROM ECOLI_DATA
#     ) A
# ORDER BY ID
